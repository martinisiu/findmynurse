<!DOCTYPE html>
<html lang="en">


<body>
      {% include 'search/base.html' %}

      <h2>Find your Nurse</h2>
      {% include 'search/searchbar.html' %}

      <style>
        /* Set the size of the div element that contains the map */
       #map {
         height: 400px;  /* The height is 400 pixels */
         width: 100%;  /* The width is the width of the web page */
         background-color: grey;
         position: absolute;
         bottom: 0;
        }
     </style>
   </head>
   <body>
     
     <!--The div element for the map -->
     <div id="map"></div>
     <script>
 // Initialize and add the map
 function initMap() {
   // The location of Uluru
   var uluru = {lat: -25.344, lng: 131.036};

   //get user location
   if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(mapCurrLoc);
    }
   else{
    console.log("no location");
    alert("Please give me your location");
   }  

 }

 function mapCurrLoc(position){
  console.log(position);
  // The map, centered at current location
  currPos = {lat:position.coords.latitude, lng:position.coords.longitude};
  console.log(currPos);
   var map = new google.maps.Map(
       document.getElementById('map'), {zoom: 6, center: currPos});
   // The marker, positioned at you
   var marker = new google.maps.Marker({position: currPos, map: map});
 }

 /*function showPosition(position) {

         let lat = position.coords.latitude;
         let long = position.coords.longitude;
         $("input[name='lat']").val(lat);
         $("input[name='lat']").val(long);
         let url_str = 'https://maps.googleapis.com/maps/api/geocode/json?latlng='+lat+','+long+'&key=AIzaSyAzdtaiHfUOkBmCAvhdZ65hemgp8Fow8HM'
        $.getJSON(url_str, function(data) {
              console.log(data);
              //here you get the location data, like street address, city and pass it to inputs and submit the form to save it.
          });
        } */
     </script>
     <!--Load the API from the specified URL
     * The async attribute allows the browser to render the page while the API loads
     * The key parameter will contain your own API key (which is not needed for this tutorial)
     * The callback parameter executes the initMap() function
     -->
     <script async defer
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzdtaiHfUOkBmCAvhdZ65hemgp8Fow8HM&callback=initMap">
     </script>

<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>

</html>